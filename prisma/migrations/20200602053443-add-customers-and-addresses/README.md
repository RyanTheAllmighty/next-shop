# Migration `20200602053443-add-customers-and-addresses`

This migration has been generated by Ryan Dowling at 6/2/2020, 5:34:43 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `shop`.`Customer` (
`email` varchar(191) NOT NULL  ,`firstName` varchar(191) NOT NULL  ,`id` int NOT NULL  AUTO_INCREMENT,`lastName` varchar(191) NOT NULL  ,`newsletterOptIn` boolean NOT NULL DEFAULT false ,
    PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `shop`.`Address` (
`customerId` int NOT NULL ,`firstLine` varchar(191) NOT NULL  ,`id` int NOT NULL  AUTO_INCREMENT,`postcode` int NOT NULL  ,`primary` boolean NOT NULL  ,`secondLine` varchar(191) NOT NULL  ,`state` ENUM('VIC', 'NSW', 'SA', 'ACT', 'NT', 'WA', 'TAS', 'QLD') NOT NULL  ,`suburb` varchar(191) NOT NULL  ,
    PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `shop`.`Address` ADD FOREIGN KEY (`customerId`) REFERENCES `shop`.`Customer`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200602053403..20200602053443-add-customers-and-addresses
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
     provider = "mysql"
-    url = "***"
+    url      = env("DATABASE_URL")
 }
 generator client {
     provider = "prisma-client-js"
@@ -29,11 +29,13 @@
     products Product[] @relation(references: [id])
 }
 model Customer {
-    id        Int    @id @default(autoincrement())
-    firstName String
-    lastName  String
+    id              Int     @id @default(autoincrement())
+    firstName       String
+    lastName        String
+    email           String
+    newsletterOptIn Boolean @default(false)
     addresses Address[]
 }
```


